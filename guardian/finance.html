<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BsFinacal</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
  <style>
   @import url('https://fonts.googleapis.com/css2?family=Red+Hat+Display:ital,wght@0,300..900&display=swap');

    * {
      font-family: "Red Hat Display", sans-serif;
      box-sizing: border-box;
    }
* {
  -webkit-tap-highlight-color: transparent;
}
body {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
    body {
      background-color: #18181b;
      color: #e0e0e0;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 15px;
      margin: 0;
      overflow-x: hidden;
    }

    h1 {
      color: #0058ff;
      font-size: 1.8em;
      font-weight: 800;
      margin: 120px 0px 0px 0px;
      position: relative;
    }

    a {
      text-decoration: none;
      color: #ffffff;
    }

    .container {
      max-width: 800px;
      width: 100%;
      padding: 15px;
    }

    .balance-display {
      font-size: 20px;
      color: #ffffff;
      background: #3c3c3c;
      padding: 10px;
      text-align: center;
      margin-bottom: 20px;
      box-shadow: 0 4px 8px 1000px rgb(23 23 23 / 66%);
      display: flex;
      justify-content: space-around;
    }

    .form-group {
      margin-bottom: 10px;
    }

    .form-group label {
     display: block;
    margin-bottom: 3px;
    font-weight: 600;
    color: #0060ff;
    text-align: justify;
    padding: 10px 10px 0px 3px;
    }

    .form-group input, .form-group select {
      padding: 8px;
      border: 1px solid #404040;
      border-radius: 0px;
      background-color: #252526;
      color: #ffffff;
      width: 100%;
      font-size: 0.9em;
      outline: none;
    }

    button {
      padding: 8px;
      background-color: #006bff;
      color: #ffffff;
      border: none;
      border-radius: 4px;
      font-size: 0.9em;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    button:hover {
      background-color: #0056b3;
    }

    .transaction-table-container {
      max-height: 400px;
      overflow-y: auto;
      width: 100%;
      margin-top: 20px;
      scrollbar-width: thin;
      scrollbar-color: #5b5b5b #00000000;
      background: #8080800a;
    }

    .transaction-table {
      width: 100%;
      border-collapse: collapse;
    }

    .transaction-table th, .transaction-table td {
     padding: 8px;
    border: 1px solid #404040;
    text-align: center;
    color: gray;
    font-size: 15px;
    font-weight: 600;
    text-transform: capitalize;
    background: #ffffff00;
    }

    .transaction-table th {
     background-color: #3c3c3c;
    position: sticky;
    top: 0;
    z-index: 10;
    color: #ffffffc9;
    }

    .transaction-table .income {
      color: #00ff00a3; /* Green for income */
    }

    .transaction-table .expense {
      color: #ff0000b3; /* Red for expenses */
    }

    .delete-btn {
      color: #ff00006b;
      border: none;
      cursor: pointer;
      background: transparent;
      padding: 0px;
      font-size: 14px;
    }

    .delete-btn:hover {
      color: red;
      background: transparent;
    }

    /* Transaction Popup Styling */
    .transaction-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 90vw;
      max-width: 400px;
      background-color: #252526;
      padding: 20px;
      display: none;
      z-index: 1000;
      flex-direction: column;
      gap: 10px;
      border-radius: 8px;
      box-shadow: 0 4px 8px 1000px rgb(0 0 0 / 70%);
    }

    .transaction-popup.active {
      display: flex;
    }

    .close-transaction {
      position: absolute;
      top: 10px;
      left: 10px;
      color: #ffffff;
      border: none;
      cursor: pointer;
      font-size: 1em;
      background: none;
    }

    .close-transaction:hover {
      color: #006bff;
    }

    .options {
      display: flex;
      justify-content: center;
      gap: 10px;
    }

    /* Period Summary Slider Styling */
    .period-slider {
      position: fixed;
      top: 0;
      right: -800px;
      width: 450px;
      height: 100vh;
      background-color: #252526;
      padding: 20px;
      z-index: 10000;
      transition: right 0.3s ease-in-out;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 10px;
          filter: drop-shadow(2px 4px 16px black);
    }

    .period-slider.active {
      right: 0;
    }

    .period-slider h2 {
      color: #ffffff;
      font-size: 1.5em;
      margin-bottom: 15px;
      font-weight: 600;
    }

    .period-result {
     color: #ffffff;
    margin-top: 15px;
    font-size: 0.9em;
    line-height: 30px;
    background: #00000080;
    padding: 10px 15px;
    
    }

    .period-result p {
      margin: 5px 0;
    }

    .period-result .days-between {
      color: #00ccffba; /* Cyan for days between */
      font-weight: bold;
    }

    .period-result .income {
      color: #00ff00a3;
    background: #ffffff14;
    font-weight: 700;
    letter-spacing: 0.5px;
    text-align: center;
    }

    .period-result .expense {
      color: #ff0000;
    background: #ffffff14;
    font-weight: 700;
    letter-spacing: 0.5px;
    text-align: center;
    }

    .period-result .net-balance {
      color: #ffd800d9; /* Gold for net balance */
      font-weight: bold;
    }

    .close-period-slider {
      position: absolute;
      top: 10px;
      right: 10px;
      color: #ffffff;
      border: none;
      cursor: pointer;
      font-size: 1em;
      background: none;
    }

    .close-period-slider:hover {
      color: #006bff;
    }

    .toggle-form-btn {
      position: fixed;
      top: 10px;
      left: 10px;
      width: 40px;
      height: 40px;
      font-size: 1.5em;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #006bff;
      color: #ffffff;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      transition: background-color 0.2s;
      z-index: 1100;
    }

    .toggle-form-btn:hover {
      background-color: #0056b3;
    }

    .toggle-period-btn {
      position: fixed;
      top: 60px;
      right: 10px;
      width: 40px;
      height: 40px;
      font-size: 1.5em;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #006bff;
      color: #ffffff;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      transition: background-color 0.2s;
      z-index: 1100;
    }

    /* Filter Dropdown */
    .form-group.filter {
      position: fixed;
      top: 10px;
      right: 10px;
      z-index: 1100;
    }

    /* Mobile Responsive Styling */
    @media (max-width: 600px) {
      .container {
        padding: 10px;
      }

      h1 {
        font-size: 1.5em;
      }

      .balance-display {
        font-size: 18px;
        padding: 8px;
      }

      .form-group input, .form-group select, button {
        font-size: 0.8em;
        padding: 6px;
      }

      .transaction-table th, .transaction-table td {
        padding: 6px 3px;
        font-size: 0.8em;
      }

      .transaction-table-container {
        max-height: 400px;
      }

      .toggle-form-btn, .toggle-period-btn {
        width: 35px;
        height: 35px;
        font-size: 1.2em;
      }

      .period-slider {
        width: 100%;
        right: -100%;
      }

      .period-slider.active {
        right: 0;
      }

      .transaction-popup {
        width: 90%;
        padding: 20px;
      }
    }
  </style>
</head>
<body>
  <a href="https://blackswan19.github.io/Educate/savenotes.html"><h1>BsFinacal</h1></a>

  <div class="container">
    <!-- Toggle Form Button -->
    <button class="toggle-form-btn" id="toggle-form">+</button>

    <!-- Toggle Period Slider Button -->
    <button class="toggle-period-btn" id="toggle-period">Î£</button>

    <div class="balance-display">
      <span id="balance-label" style="font-weight: 800; color: rgb(155, 155, 155);">Total </span> : <span id="balance" style="font-weight: 800; color: #00fff9b0;">0.00</span>
    </div>

    <!-- Transaction Input Popup -->
    <div class="transaction-popup" id="transaction-popup">
      <div class="form-group">
        <label for="transaction-type">Transaction Type:</label>
        <select id="transaction-type">
          <option value="income">Income</option>
          <option value="expense">Expense</option>
        </select>
      </div>
      <div class="form-group">
        <label for="transaction-description">For:</label>
        <input type="text" id="transaction-description" placeholder="Enter name or spends on">
      </div>
      <div class="form-group">
        <label for="transaction-amount">Rs:</label>
        <input type="number" id="transaction-amount" placeholder="Enter amount" step="0.01">
      </div>
      <div class="form-group">
        <label for="transaction-date">Date:</label>
        <input type="date" id="transaction-date">
      </div>
      <div class="options">
        <button id="add-transaction">Add Transaction</button>
        <button onclick="closeTransactionPopup()">Cancel</button>
      </div>
    </div>

    <!-- Filter Dropdown -->
    <div class="form-group filter">
      <select id="filter-type" onchange="renderTransactions()">
        <option value="all">All</option>
        <option value="income">Income</option>
        <option value="expense">Expense</option>
      </select>
    </div>

    <!-- Transactions Table -->
    <div class="transaction-table-container">
      <table class="transaction-table">
        <thead>
          <tr>
            <th>For</th>
            <th>Rs</th>
            <th>Type</th>
            <th>Date</th>
            <th>Del</th>
          </tr>
        </thead>
        <tbody id="transaction-list">
          <!-- Transaction rows will be dynamically added here -->
        </tbody>
      </table>
    </div>
  </div>

  <!-- Period Summary Slider -->
  <div id="period-slider" class="period-slider">
    <button class="close-period-slider" onclick="closePeriodSlider()">X</button>
    <h2>Period Summary</h2>
    <div class="form-group">
      <label for="start-date">Start Date:</label>
      <input type="date" id="start-date">
    </div>
    <div class="form-group">
      <label for="end-date">End Date:</label>
      <input type="date" id="end-date">
    </div>
    <div class="form-group">
      <label for="period-type">Show Details For:</label>
      <select id="period-type">
        <option value="expense">Expenses</option>
        <option value="income">Income</option>
        <option value="all">All</option>
      </select>
    </div>
    <button id="calculate-period">Calculate</button>
    <div id="period-result" class="period-result"></div>
  </div>

  <script>
    let balance = 0;
    let transactions = JSON.parse(localStorage.getItem("transactions")) || [];

    // Set default date to current system date
    function setDefaultDates() {
      const today = new Date().toISOString().split('T')[0];
      document.getElementById("transaction-date").value = today;
      document.getElementById("start-date").value = today;
      document.getElementById("end-date").value = today;
    }

    // Toggle Transaction Popup
    document.getElementById("toggle-form").addEventListener("click", () => {
      const popup = document.getElementById("transaction-popup");
      const button = document.getElementById("toggle-form");
      if (popup.classList.contains("active")) {
        popup.classList.remove("active");
        button.textContent = "+";
      } else {
        popup.classList.add("active");
        button.textContent = "â";
      }
    });

    function closeTransactionPopup() {
      document.getElementById("transaction-popup").classList.remove("active");
      document.getElementById("toggle-form").textContent = "+";
    }

    // Toggle Period Slider
    document.getElementById("toggle-period").addEventListener("click", () => {
      const slider = document.getElementById("period-slider");
      slider.classList.toggle("active");
      document.getElementById("period-result").innerHTML = "";
    });

    function closePeriodSlider() {
      document.getElementById("period-slider").classList.remove("active");
    }

    function updateBalance() {
      renderTransactions();
    }

    function formatDate(dateString) {
      const date = new Date(dateString);
      const day = String(date.getDate()).padStart(2, '0');
      const month = String(date.getMonth() + 1).padStart(2, '0');
      return `${day}-${month}`;
    }

    function addTransactionToTable(transaction, index) {
      const transactionList = document.getElementById("transaction-list");
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${transaction.description}</td>
        <td>${transaction.amount.toFixed(0)}</td>
        <td class="${transaction.type}">${transaction.type}</td>
        <td>${formatDate(transaction.date)}</td>
        <td style='text-align: center;'><button class="delete-btn" onclick="deleteTransaction(${index})"><i class="fa-solid fa-square-minus"></i></button></td>
      `;
      transactionList.appendChild(row);
    }

    function loadTransactions() {
      transactions.forEach((transaction) => {
        balance += transaction.type === "income" ? transaction.amount : -transaction.amount;
      });
      updateBalance();
    }

    function saveTransactions() {
      localStorage.setItem("transactions", JSON.stringify(transactions));
    }

    function deleteTransaction(index) {
      const transaction = transactions[index];
      balance -= transaction.type === "income" ? transaction.amount : -transaction.amount;
      transactions.splice(index, 1);
      saveTransactions();
      renderTransactions();
    }

    function renderTransactions() {
      const transactionList = document.getElementById("transaction-list");
      const filterType = document.getElementById("filter-type").value;
      const balanceLabel = document.getElementById("balance-label");
      const balanceDisplay = document.getElementById("balance");

      transactionList.innerHTML = "";

      let typeTotal = 0;
      transactions.forEach((transaction, index) => {
        if (filterType === "all" || transaction.type === filterType) {
          addTransactionToTable(transaction, index);
          if (filterType === "all") {
            typeTotal += transaction.type === "income" ? transaction.amount : -transaction.amount;
          } else if (transaction.type === filterType) {
            typeTotal += transaction.amount;
          }
        }
      });

      balanceLabel.innerText = filterType === "all" ? "Total â¹" : `Total ${filterType.charAt(0).toUpperCase() + filterType.slice(1)}`;
      balanceDisplay.innerText = typeTotal.toFixed(2);
    }

    document.getElementById("add-transaction").addEventListener("click", () => {
      const type = document.getElementById("transaction-type").value;
      const description = document.getElementById("transaction-description").value;
      const amount = parseFloat(document.getElementById("transaction-amount").value);
      const date = document.getElementById("transaction-date").value;

      if (!description || isNaN(amount) || amount <= 0 || !date) {
        alert("Please enter a valid description, amount, and date.");
        return;
      }

      const transaction = { description, amount, type, date };
      transactions.push(transaction);

      balance += type === "income" ? amount : -amount;
      updateBalance();
      saveTransactions();

      document.getElementById("transaction-description").value = "";
      document.getElementById("transaction-amount").value = "";
      document.getElementById("transaction-date").value = new Date().toISOString().split('T')[0];
      document.getElementById("transaction-popup").classList.remove("active");
      document.getElementById("toggle-form").textContent = "+";
    });

    // Period Summary Functionality
    document.getElementById("calculate-period").addEventListener("click", () => {
      const startStr = document.getElementById("start-date").value;
      const endStr = document.getElementById("end-date").value;
      const periodType = document.getElementById("period-type").value;

      if (!startStr || !endStr) {
        alert("Please select start and end dates.");
        return;
      }

      const start = new Date(startStr);
      const end = new Date(endStr);

      if (start > end) {
        alert("Start date must be before or equal to end date.");
        return;
      }

      const days = Math.floor((end - start) / (1000 * 60 * 60 * 24)) + 1;

      const filtered = transactions.filter(t => {
        const tDate = new Date(t.date);
        return tDate >= start && tDate <= end;
      });

      let total = 0;
      let listHtml = "";
      const listedTransactions = filtered.filter(t => periodType === "all" || t.type === periodType);

      listedTransactions.forEach(t => {
        const verb = t.type === "expense" ? "spent" : "received";
        const onFrom = t.type === "expense" ? "on" : "for";
        listHtml += `<p class="${t.type}">You ${verb}: ${t.amount.toFixed(0)} rs ${onFrom} ${t.description}</p>`;
        total += t.type === "expense" ? (periodType === "all" ? -t.amount : t.amount) : (periodType === "all" ? t.amount : t.amount);
      });

      const resultDiv = document.getElementById("period-result");
      const typeLabel = periodType === "all" ? "Net Balance" : periodType.charAt(0).toUpperCase() + periodType.slice(1);
      resultDiv.innerHTML = `
        <p class="days-between">No of days between : ${days}</p>
        <p class="net-balance">Total ${typeLabel} on ${days}(day/days) was : ${total.toFixed(0)}</p>
        ${listHtml}
      `;
    });

    // Explicitly hide elements on page load
    document.getElementById("transaction-popup").classList.remove("active");
    document.getElementById("period-slider").classList.remove("active");
    loadTransactions();
    setDefaultDates(); // Set default dates on load
        
    document.addEventListener("DOMContentLoaded", () => {
      const customMenu = document.querySelector(".custom-menu");

      document.addEventListener("contextmenu", (event) => {
        event.preventDefault();
        if (customMenu) {
          customMenu.style.display = "block";
          customMenu.style.top = `${event.pageY}px`;
          customMenu.style.left = `${event.pageX}px`;
        }
      });

      document.addEventListener("click", () => {
        if (customMenu) {
          customMenu.style.display = "none";
        }
      });
    });
  </script>
</body>
</html>
